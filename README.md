# GO NEWS

Aгрегатор новостей. Парсит RSS ленты новостных сайтов, указанных в конфиге (файл `config.json`), сохраняет новости в базу данных (Postgres). 

## API

API работает с форматом JSON:

* **GET /news/{n}** - возвращает последние n записей, сортированных по дате публикации.
* **GET /news** - возвращает страницу со списком новостей. Поддерживает фильтрацию по названию новости (параметр filter) и запрашивемый номер страницы (параметр page).
* **GET /news/full/{id}** - возвращает одну новость по ее id.


Структура записи:

    ID      int    // номер записи
    Title   string // заголовок публикации
    Content string // содержание публикации
    PubTime int64  // время публикации
    Link    string // ссылка на источник

## Переменные окружения

Переменные умеет считывать из файла `.env` в директории исполняемого файла (в корне проекта).

Используются следующие:

    LOG_LEVEL=INFO
    API_LISTEN=:8080
    API_READ_TIMEOUT=30s
    API_WRITE_TIMEOUT=30s

В примере выше указаны дефолтные значения. Если программа не считает пользовательские env, то возьмет эти значения. 

Переменные для подключения к Postgres:

    PG_USER=
    PG_PASSWORD=
    PG_HOST=
    PG_PORT=
    PG_DATABASE=
    PG_TEST_DATABASE=

## Конфиг RSS парсера

Читает из файла `config.json` в директории исполняемого файла (в корне проекта).

Структура JSON конфига:

    {
        "rss":[
            "https://habr.com/ru/rss/hub/go/all/?fl=ru",
            "https://habr.com/ru/rss/best/daily/?fl=ru"
            ],
        "request_period": 5
    }

где массив rss - список ссылок для парсинга, request_period - интервал опроса в минутах.

